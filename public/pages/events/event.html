<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Events</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="/assets/css/style-new.css">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="/assets/js/navbar_and_footer_loader.js"></script>
    <script src="/assets/js/utils.js"></script>

    <script type="module">
        import Event from "../../assets/js/modules/event.mjs";
        let eventId = getCookieValue('eveid');
        let event = new Event(eventId);
        let slide_num=2;
        let currSlide=0;
        event.fetchData().then(data =>
        {
            $('#event-title').text(event.title);
            $('.banner-bg').css('background-image', `url("${event.coverImage}")`);
            $('#performer-title').text(`${event.performerFirstName} ${event.performerLastName}`);
            $('#performer-link').attr('href', `/performers/${event.performerId}`);
            $('#description').text(event.description);
            $('#eventprice').text(event.price);
            event.getImages('all').then(imgs=>
            {
                console.log(imgs[0]);

                slide_num=imgs.length;
                for(let i=0; i<imgs.length;i++)
                {
                    let img=imgs[i];
                    let slide= $(`<li class="slide" id="slide_${i}">
                                   <img class="image-slide" src="${img.image}">
                                  </li>`);

                    if(i === 0)slide.addClass('show').css('top', 0);
                    else slide.css('top', '100%');
                    $('.slider ul').append(slide);
                }
            })
        });


        $(document).ready(()=>
        {
            $('#slide-next').click(()=>slide(1));
            $('#slide-prev').click(()=>slide(-1));
        });


        function slide(x) {
            currSlide+=x;
            if (currSlide>slide_num-1){
                currSlide=0;
            }
            if(currSlide<0){
                currSlide=slide_num-1;
            }

            let current = $('.slide.show');
            let next = $(`#slide_${currSlide}`);

            /*current.slideUp(400, () =>
            {
                current.removeClass('show');
            });
            next.slideUp(400, () =>
            {
                next.addClass("show");
            });*/

            let currentHeight = current.height();
            current.animate({
                height: 0
            }, 400, () =>
            {
                current.removeClass('show');
                current.css('height', currentHeight);
            });

            next.addClass('show').animate({
                top: 0
            }, 400, () =>
            {
                next.css('top', '100%');
            });
        }

    </script>

    <script>


    </script>


</head>
<body>

<header></header>

<div class="banner" style="background-color: #FFF8E1">
    <div class="banner-bg"></div>
    <div class="headline" style="background-color: transparent">
    </div>
</div>
<div class="container-event">
    <main class="event-container">
    <div class="event-left-column">
        <div class="slider">
            <ul>

            </ul>
            <a class="prev" id="slide-prev">&#10094;</a>
            <a class="next" id="slide-next">&#10095;</a>
        </div>

    </div>
<div class="event-right-column">
    <div class="event-description">
        <a id="performer-link"><span id="performer-title"></span></a>
        <span style="color: black" id="event-title"></span>
        <p id="description"></p>
    </div>
    <div class="event-price">
        <span id="eventprice"></span>
        <a href="#" class="cart-btn">BUY</a>
    </div>
</div>
    </main>
    <div class="correlated">
        <div class="seminar">
            <span>CORRELATED SEMINARS</span>
            <ul>
                <li class="seminar-card">
                    <div class="seminar-img">
                        <img src="/assets/images/backgrounds/wallpaper.jpg">
                    </div>
                    <div class="seminar-description">
                        <h2>Seminar Title</h2>
                        <span>
                            sjcfvfjnvfjnvjfv
                        </span>
                    </div>
                </li>
                <li class="seminar-card">
                    <div class="seminar-img">
                        <img src="/assets/images/backgrounds/shoppingcart-bg.jpg">
                    </div>
                    <div class="seminar-description">
                        <h2>Seminar Title</h2>
                        <span>
                            sjcfvfjnvfjnvjfv
                        </span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
<footer></footer>
<div class="mobile-nav"></div>

</body>
</html>