<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VARAZZERS FESTIVAL | PERFORMERS </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,800,300" rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/assets/css/style-new.css">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>


    <script src="/assets/js/navbar_and_footer_loader.js"></script>
    <script src="/assets/js/typewriter.js"></script>
    <script type="module" src="/assets/js/performer.js"></script>

    <script>

        let container;
        let cardWidth;
        let scrollTimer;

        $(document).on('mouseover', '.performer-card', function () {
            let img = $(this).find('img').attr('src');
            $('.performer-bg').css('background-image', `url("${img}")`);
            $('.banner-bg').css('opacity', 0);
        });

        $(document).on('mouseout', '.performer-card', function () {
            $('.banner-bg').css('opacity', 1);
        });

        $(window).resize(() =>
        {
            adjustContainerSize();
            alignCards();
        });

        $(() =>
        {
            container = $(".performer-container")[0];
            let scrollTimer;

            adjustContainerSize();

            window.addEventListener('wheel', wheelEvent, {passive: false});
            container.addEventListener('wheel', (e) =>
            {
                if(e.deltaX !== 0)e.preventDefault();
            }, {passive: false});

            container.addEventListener('scroll', (e) =>
            {
                if(scrollTimer != null)clearTimeout(scrollTimer);
                scrollTimer = setTimeout(alignCards, 200);
            });
        });

        function wheelEvent(event)
        {
            if(wheelEvent.lock)
            {
                event.preventDefault();
                return;
            }
            wheelEvent.lock = true;

            let containerMaxScroll = Math.trunc(Math.abs((container.scrollWidth - container.clientWidth) - container.scrollLeft)) === 0;

            if(scrollTimer !== null) clearTimeout(scrollTimer);

            if(window.scrollY <= 2 && (!containerMaxScroll && event.deltaY > 0 || event.deltaY < 0))
            {
                //container.scrollBy(event.deltaY, 0);
                let scrollLeft = container.scrollLeft + (event.deltaY < 0 ? -cardWidth : cardWidth);

                $(".performer-container").animate({
                    scrollLeft: scrollLeft
                }, 350, () => wheelEvent.lock = false);

                window.scrollTo(0, 0);
                event.preventDefault();
            }
            else wheelEvent.lock = false;

            //scrollTimer = window.setTimeout(alignCards, 250);
        }

        function alignCards() {
            $(".performer-container").animate({scrollLeft: Math.round($(".performer-container").scrollLeft()/cardWidth)*cardWidth}, 200);
        }

        function adjustContainerSize()
        {
            cardWidth = $(window).width()*0.85;
            if(cardWidth > 300)cardWidth = 300;
            cardWidth += 40; //margin

            console.log(`${$(window).height()*0.45} ${cardWidth}`);

            let maxWidth = $(window).width()*0.8;
            if(maxWidth > 1540)maxWidth = 1540;
            let cardNumber = Math.trunc(maxWidth/cardWidth);
            if(cardNumber < 1)cardNumber = 1;
            container.style.width = `${(cardNumber*cardWidth)}px`;
        }

    </script>

    <style>

        body::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }

        .performer-container{
            width: 80%;
            max-width: 1540px;
            margin: auto;
            padding: 0;
            overflow-x: scroll;
        }

        .performer-container::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }

        .performer-container ul{
            width: fit-content;
            padding: 0;
            margin: 0;
            list-style-type: none;
            display: flex;
            flex-direction: row;
        }

        @media (max-width: 940px) {
            .performer-container{
                width: 100%;
                padding: 0;
            }
        }

        .performer-card{
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 85vw;
            height: 85vw;
            max-width: 300px;
            max-height: 300px;
            overflow: hidden;
            justify-self: center;
            margin: 20px;
        }

        .performer-card img{
            width: 100%;
            height: 100%;
        }

        .performer-card div{
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .performer-card div:before{
            content: '';
            position: absolute;
            height: 100%;
            width: 70%;
            top: 0;
            left: calc(50% - 35%);
            border-bottom: 1px solid rgba(80, 80, 80, .4);
            border-top: 1px solid rgba(80, 80, 80, .4);
            z-index: 15;
        }

        .performer-card div:after{
            content: '';
            position: absolute;
            height: 70%;
            width: 100%;
            top: calc(50% - 35%);
            left: 0;
            border-right: 1px solid rgba(80, 80, 80, .4);
            border-left: 1px solid rgba(80, 80, 80, .4);
            z-index: 15;
        }

        .performer-card:hover{
            border: none;
        }

        .performer-card a{
            position: absolute;
            height: 100%;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 20;
        }

        .performer-card span{
            position: absolute;
            width: 100%;
            font-family: 'Gilroy-Medium', serif;
            font-size: 24px;
            line-height: 24px;
            letter-spacing: 2px;
            top: calc(50% - 12px);
            text-align: center;
            z-index: 10;
        }

        .performer-card:hover span{
            color: white;
            text-shadow: 2px 2px 2px black;
            animation-name: nameFadeIn;
            animation-duration: 1000ms;
            animation-direction: normal;
            animation-fill-mode: forwards;
        }

        @keyframes nameFadeIn {
            0%{
                top: 100%;
                opacity: 0;
            }
            100%{
                top: calc(50% - 12px);
                opacity: 100%;
            }
        }


        .performer-card:after{
            content: '';
            position: absolute;
            height: 100%;
            width: 50%;
            background-color: white;
            top: 0;
            right: 0;
            transition: top 400ms;
        }

        .performer-card:before{
            content: '';
            position: absolute;
            height: 100%;
            width: 50%;
            background-color: white;
            bottom: 0;
            left: 0;
            transition: bottom 400ms;
        }

        .performer-card:hover:after{
            top: 100%
        }

        .performer-card:hover:before{
            bottom: 100%;
        }

        .performer-bg{
            position: absolute;
            top: 0;
            left: 0;
            width: calc(100% + 20px);
            height: calc(100% + 20px);
            padding: 200px 100px;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: 0 55%;
            filter: blur(1px);
            margin: -10px -10px -10px -10px;
            overflow: hidden;
            z-index: -1;
        }

        .banner{
            min-height: unset;
            max-height: 50vh;
        }

    </style>

</head>
<body>

<header></header>

<div class="banner" style="background-color: transparent">
    <div class="banner-bg" style="background-color: #FF4136"></div>
    <div class="performer-bg" style="background-image: none"></div>
    <div class="headline" style="background-color: transparent">
        <span style="color: #FFFFFF">PERFORMERS</span>
    </div>
</div>


<div class="performer-container">
    <ul>
        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Generazione Disagio</span>
            <a href="#"></a>
        </li>
        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Anonymous Surfers</span>
            <a href="#"></a>
        </li>
        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Geeti Gangal</span>
            <a href="#"></a>
        </li>

        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Generazione Disagio</span>
            <a href="#"></a>
        </li>
        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Anonymous Surfers</span>
            <a href="#"></a>
        </li>
        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Geeti Gangal</span>
            <a href="#"></a>
        </li>

        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Generazione Disagio</span>
            <a href="#"></a>
        </li>
        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Anonymous Surfers</span>
            <a href="#"></a>
        </li>
        <li class="performer-card">
            <div></div>
            <img src="/assets/images/backgrounds/perf-test.png">
            <span>Geeti Gangal</span>
            <a href="#"></a>
        </li>
    </ul>
</div>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<footer></footer>
<div class="mobile-nav"></div>

</body>
</html>